<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Chong Kay Heen - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">FomoFoto</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://cs2103-ay1819s2-w14-2.github.io/main/"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Chong Kay Heen - Project Portfolio</h1></div><div id="content"><div class="sect1">
<h2 id="project-fomofoto"><a class="link" href="#project-fomofoto">PROJECT: FomoFoto</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="1-overview-of-the-project"><a class="link" href="#1-overview-of-the-project">1. Overview of the Project</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>My team and I were tasked with enhancing a basic command line AddressBook for our Software Engineering project. We decided to morph the project into an image editor.<br></p>
</div>
<div class="paragraph">
<p>FomoFoto is a robust yet simple image-editing tool. Users interact with the application through worded commands from their keyboard, and receive visual feedback from it through the displayed image on the application. Unlike other heavy image editors, FomoFoto has a very gentle learning curve as it abstracts out clutter by providing the more essential features (complex editing can still be done with special commands). The features and implementations are well documented in guides for users and developers respectively.<br></p>
</div>
<div class="paragraph">
<p>In addition, FomoFoto is well maintained with high reliability and code quality as it is covered by rigorous tests and checks.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-summary-of-contributions"><a class="link" href="#2-summary-of-contributions">2. Summary of Contributions</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides a summary of my coding, documentation and miscellaneous contributions to FomoFoto, our team project.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Major Enhancement</strong>: I added <strong>image manipulation commands</strong>.</p>
<div class="ulist">
<ul>
<li>
<p><em>What it does:</em> This feature allows the user to manipulate images on a physical level, such as rotating, cropping and resizing the target image. Users key in keywords like <code>rotate</code>, <code>crop</code> and <code>resize</code> to activate the respective commands.</p>
</li>
<li>
<p><em>Justification:</em> This feature improves the product significantly because it is an essential feature of an image editor. Users might want to <code>rotate</code> their images because the position is wrong or <code>crop</code> out certain unwanted parts in the image. Should the image be too large, the user can <code>resize</code> it as well.</p>
</li>
<li>
<p><em>Highlights:</em> This enhancement works with all other commands, including the image filters that were implemented by my teammate. An in-depth analysis of the commands were done before we decided to make use of a library. The implementation was challenging because there was a need to coordinate between the image filter commands and the commands here, because the two libraries returned different objects. There was a need to ensure that the <code>Image</code> class and <code>CurrentEdit</code> class could accept changes from both libraries.</p>
</li>
<li>
<p><em>Credits:</em> <a href="https://github.com/rkalla/imgscalr"><code>ImgScalr Library</code></a></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Major Enhancement</strong>: I added a <strong>watermark command</strong>.</p>
<div class="ulist">
<ul>
<li>
<p><em>What it does:</em> This feature allows the user to add a watermark (any text or numbers) with the (c) sign to the target image. Users key in the keyword <code>wm</code> to activate this command.</p>
</li>
<li>
<p><em>Justification:</em> This feature improves the product significantly because it helps users such as professional photographers protect their images after editing it on our image editor. The copyright watermark prevents unauthorised third parties from using the images for their own private purposes.</p>
</li>
<li>
<p><em>Highlights:</em> It was especially challenging to integrate this command with all other commands acting on the same image, because a watermark should only be allowed to be added once to an image. This implied that we had to ensure that the <code>Image</code> class contains a flag that indicates the presence of a watermark on the image, and this flag had to be constantly updated accurately in every command that can possibly add or remove a watermark from an image, which includes the watermark command, setpreset command and undo-redo commands.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor Enhancement</strong>: I added a feature where the <code>Image</code> returns a file type (e.g. JPEG, PNG), because edits to images are affected by the file type.</p>
</li>
<li>
<p><strong>Code Contributed</strong>: <a href="https://github.com/CS2103-AY1819S2-W14-2/main/commits?author=kayheen">List of commits</a>, <a href="https://nus-cs2103-ay1819s2.github.io/cs2103-dashboard/#search=kay%20heen%20&amp;sort=displayName&amp;since=2019-02-10&amp;until=2019-04-13&amp;timeframe=day&amp;reverse=false&amp;repoSort=true">Project Code Dashboard</a></p>
</li>
<li>
<p><strong>Other Contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project Management:</p>
<div class="ulist">
<ul>
<li>
<p>Ensured that we were on task with our project documentation by allocating roles and ensuring consistency with our words and diagrams. (User Guide and Developer Guide)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to Existing Features:</p>
<div class="ulist">
<ul>
<li>
<p>Wrote tests for image manipulation and watermark commands to increase coverage. (Pull requests <a href="https://github.com/CS2103-AY1819S2-W14-2/main/pull/188">#188</a>, <a href="https://github.com/CS2103-AY1819S2-W14-2/main/pull/208">#208</a>, <a href="https://github.com/CS2103-AY1819S2-W14-2/main/pull/222">#222</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Did Developer Guide architecture and sequence diagram for the overall application: <a href="https://github.com/CS2103-AY1819S2-W14-2/main/pull/118">#118</a></p>
</li>
<li>
<p>Did the Developer Guide documentation for image manipulation: <a href="https://github.com/CS2103-AY1819S2-W14-2/main/pull/123/files">#123</a></p>
</li>
<li>
<p>Did the Devloper Guide documentation for the watermark command: <a href="https://github.com/CS2103-AY1819S2-W14-2/main/pull/229">#229</a></p>
</li>
<li>
<p>Did the overall walkthrough for the User Guide: <a href="https://github.com/CS2103-AY1819S2-W14-2/main/pull/65">#65</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>PRs reviewed (with non-trivial review comments):
<a href="https://github.com/CS2103-AY1819S2-W14-2/main/pull/220">#220</a>,
<a href="https://github.com/CS2103-AY1819S2-W14-2/main/pull/225">#225</a>, <a href="https://github.com/CS2103-AY1819S2-W14-2/main/pull/235">#235</a>,</p>
</li>
<li>
<p>Reported bugs and suggestions for other teams in the class:  <a href="https://github.com/CS2103-AY1819S2-W16-2/main/issues/102">#102</a>, <a href="https://github.com/CS2103-AY1819S2-W16-2/main/issues/112">#112</a>,
<a href="https://github.com/CS2103-AY1819S2-W16-2/main/issues/115">#115</a>,
<a href="https://github.com/CS2103-AY1819S2-W16-2/main/issues/117">#117</a>,</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tools:</p>
<div class="ulist">
<ul>
<li>
<p>Integrated a third party library (ImgScalr) to the project (<a href="https://github.com/CS2103-AY1819S2-W14-2/main/pull/26">#26</a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="3-contributions-to-the-user-guide"><a class="link" href="#3-contributions-to-the-user-guide">3. Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="a-walk-through"><a class="link" href="#a-walk-through">A Walk Through</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s start on our image editing journey. In this walk through, we will be demonstrating some simple commands to edit a sample image.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Head over to this <a href="https://twistedsifter.files.wordpress.com/2012/03/squirrel-photobomb-banff.jpg">link</a> to get a suggested sample image to start from.</p>
</li>
<li>
<p>Save the image in any desired folder you like on your device, like your Pictures folder for example. Name your image <strong>squirrel.jpg</strong>.</p>
</li>
<li>
<p>Start FomoFoto by referring to <a href="#Quick Start">[Quick Start]</a>.</p>
</li>
<li>
<p>Open the folder that the image file is stored in. Then, to get the filepath of the image:</p>
<div class="ulist">
<ul>
<li>
<p>In Windows: Hold on to the <kbd>Shift</kbd> key and <strong>right click</strong> on your image file. Click the option <strong>Copy path</strong>.</p>
</li>
<li>
<p>In Mac: Go to terminal and navigate to your image file. Type 'pwd' to get the filepath to your image file and copy paste.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Go back to the FomoFoto application. Import the image into FomoFoto by typing as follows:</p>
<div class="imageblock">
<div class="content">
<img src="../images/import.PNG" alt="import" width="912">
</div>
<div class="title">Figure 1. Import Command</div>
</div>
</li>
<li>
<p>Paste the filepath of the image you would like to import.</p>
<div class="ulist">
<ul>
<li>
<p>In Windows: Remove the <kbd>"</kbd> and <kbd>"</kbd> signs at the two ends of the filepath.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Ensure your final command looks similar to the figure below (filepath may differ):</p>
<div class="imageblock">
<div class="content">
<img src="../images/importCommand.PNG" alt="importCommand" width="915">
</div>
<div class="title">Figure 2. Import with Filepath</div>
</div>
</li>
<li>
<p>Press <kbd>Enter</kbd> to execute the import command. Your image should be now displayed on the Album tab on the FomoFoto application as shown in the figure below.</p>
<div class="imageblock">
<div class="content">
<img src="../images/importSuccess.PNG" alt="importSuccess" width="917">
</div>
<div class="title">Figure 3. Import Success</div>
</div>
</li>
<li>
<p>Open the imported image in FomoFoto by typing as follows:</p>
<div class="imageblock">
<div class="content">
<img src="../images/open.PNG" alt="open" width="917">
</div>
<div class="title">Figure 4. Open Command</div>
</div>
</li>
<li>
<p>Press <kbd>Enter</kbd> to execute the open command. Your image should be now displayed on the FomoFoto application as shown in the figure below.</p>
<div class="imageblock">
<div class="content">
<img src="../images/openImage.PNG" alt="openImage" width="917">
</div>
<div class="title">Figure 5. Open Success</div>
</div>
</li>
<li>
<p>Increase the brightness of the image by typing the following command: <code>brightness 2.0</code>. This doubles the brightness of the image.</p>
<div class="imageblock">
<div class="content">
<img src="../images/brightnessCommand.PNG" alt="brightnessCommand" width="915">
</div>
<div class="title">Figure 6. Brightness Command</div>
</div>
</li>
<li>
<p>Press <kbd>Enter</kbd>. Your image should be brighter as shown in the figure below.</p>
<div class="imageblock">
<div class="content">
<img src="../images/brightnessSuccess.PNG" alt="brightnessSuccess" width="917">
</div>
<div class="title">Figure 7. Brightness Success</div>
</div>
</li>
<li>
<p>Crop your image by typing the following command: <code>crop 310 250 140 200</code>. Press <kbd>Enter</kbd>. Your image should look similar as the figure below.</p>
<div class="imageblock">
<div class="content">
<img src="../images/cropSuccess.PNG" alt="cropSuccess" width="918">
</div>
<div class="title">Figure 8. Crop Success</div>
</div>
</li>
<li>
<p>Save your edits by typing command: <code>save</code>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="crop-an-image-code-crop-code"><a class="link" href="#crop-an-image-code-crop-code">Crop an Image : <code>crop</code></a></h3>
<div class="paragraph">
<p>Crops an image based on given top left hand corner coordinates, width and height of final cropped image wanted.<br>
Format: <code>crop X_POINTCOORD Y_POINTCOORD WIDTH HEIGHT</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The point coordinates must be separated by a space each.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>crop 2 3 500 500</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="resize-an-image-code-resize-code"><a class="link" href="#resize-an-image-code-resize-code">Resize an Image : <code>resize</code></a></h3>
<div class="paragraph">
<p>Resizes the image to a given width and height provided by the user.<br>
Format: <code>resize WIDTH HEIGHT</code></p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>resize 100 200</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="rotate-an-image-code-rotate-code"><a class="link" href="#rotate-an-image-code-rotate-code">Rotate an Image : <code>rotate</code></a></h3>
<div class="paragraph">
<p>Rotates the image by a given degree provided by the user. Only 90, 180 or 270 degrees of rotation is allowed.<br>
Format: <code>rotate ANGLE</code></p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>rotate 90</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="watermark-code-wm-code"><a class="link" href="#watermark-code-wm-code">WaterMark : <code>wm</code></a></h3>
<div class="paragraph">
<p>Adds a watermark to the image with a &#169; at the start of the input message. Should the message be too long to fit within the width of the image, the message will get cut off.<br>
Format: <code>wm MESSAGE</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A watermark can only be added once to an image.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>wm FomoFoto</code></p>
</li>
<li>
<p><code>wm Done By FomoFoto</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="design"><a class="link" href="#design">Design</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Design-Architecture"><a class="link" href="#Design-Architecture">Architecture</a></h3>
<div class="imageblock">
<div class="content">
<img src="../images/Architecture.png" alt="Architecture" width="763" height="339">
</div>
<div class="title">Figure 9. Architecture Diagram</div>
</div>
<div class="paragraph">
<p>The <strong><em>Architecture Diagram</em></strong> given above explains the high-level design of the App. Given below is a quick overview of each component.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>.pptx</code> files used to create diagrams in this document can be found in the <a href="{repoURL}/docs/diagrams/">diagrams</a> directory. To update a diagram, modify the diagram in the pptx file, select the objects of the diagram, and choose <code>Save as picture</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>Main</code> has only one class called <a href="{repoURL}/src/main/java/seedu/address/MainApp.java"><code>MainApp</code></a>. It is responsible for,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>At app launch: Initializes the components in the correct sequence, and connects them up with each other.</p>
</li>
<li>
<p>At shut down: Shuts down the components and invokes cleanup method where necessary.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#Design-Commons"><strong><code>Commons</code></strong></a> represents a collection of classes used by multiple other components.
The following class plays an important role at the architecture level:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>LogsCenter</code> : Used by many classes to write log messages to the App&#8217;s log file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The rest of the App consists of four components.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Design-Ui"><strong><code>UI</code></strong></a>: The UI of the App.</p>
</li>
<li>
<p><a href="#Design-Logic"><strong><code>Logic</code></strong></a>: The command executor.</p>
</li>
<li>
<p><a href="#Design-Storage"><strong><code>Storage</code></strong></a>: Reads data from, and writes data to, the hard disk.</p>
</li>
<li>
<p><a href="#Design-Model"><strong><code>Model</code></strong></a>: Holds the data of images in the App in memory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of the first three components do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Defines its <em>API</em> in an <code>interface</code> with the same name as the Component.</p>
</li>
<li>
<p>Exposes its functionality using a <code>{Component Name}Manager</code> class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>Model</code> component consists of three components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Album</code> which stores the pool of images that has been imported into the App.</p>
</li>
<li>
<p><code>CurrentEdit</code> which holds the image that the App is currently editing in-memory.</p>
</li>
<li>
<p><code>TransformationSet</code> which stores the preset commands created by the user to edit the image.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="how-the-architecture-components-interact-with-each-other"><a class="link" href="#how-the-architecture-components-interact-with-each-other">How the Architecture Components Interact with Each Other</a></h4>
<div class="paragraph">
<p>The <em>Sequence Diagrams</em> below show how the components interact with each other for the scenarios where the user issues the commands <code>import C:\Users\XXX\Desktop\Pictures</code> and <code>rotate 90</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SDforImportcommand.png" alt="SDforImportcommand" width="800">
</div>
<div class="title">Figure 10. Component interactions for <code>import C:\Users\XXX\Desktop\Pictures</code> command</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SDforRotatecommand.png" alt="SDforRotatecommand" width="800">
</div>
<div class="title">Figure 11. Component interactions for <code>rotate 90</code> command</div>
</div>
<div class="paragraph">
<p>The sections below give more details of each component.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="image-manipulation"><a class="link" href="#image-manipulation">Image Manipulation</a></h3>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>This segment involves manipulating the physical image itself, such as rotating, cropping and resizing. The implementations of these features are facilitated by <a href="https://github.com/rkalla/imgscalr"><code>ImgScalr Library</code></a>, which is an external API Library that helps process the target image.</p>
</div>
<div class="paragraph">
<p>The manipulation feature is facilitated by <code>CurrentEdit</code>. It uses the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CurrentEdit#tempImageDoNotExist()</code> - Returns <code>true</code> if <code>tempImage</code> in <code>CurrentEdit</code> is null. <code>tempImage</code> is null only if <code>open</code> command is never called.</p>
</li>
<li>
<p><code>CurrentEdit#getTempImage</code> - Retrieves the temporary image <code>tempImage</code> which stores the filepath of the temporary image, its history of edits [<code>List&lt;Command&gt;</code>] and its metadata.</p>
</li>
<li>
<p><code>CurrentEdit#updateTempImage</code> - Replaces the temporary image in <code>temp</code> directory with the newly edited image and update the <code>tempImage</code> instance in the class.</p>
</li>
<li>
<p><code>CurrentEdit#addCommand</code> - Adds this command to the edit history [<code>List&lt;Command&gt;</code>] in <code>tempImage</code> for the <code>undo/redo</code> command.</p>
</li>
<li>
<p><code>CurrentEdit#displayTempImage()</code> - Displays the temporary image stored in the <code>temp</code> directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This manipulation feature mainly consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>RotateCommand</code>: Allows user to rotate images by specifying a degree (90, 180 or 270 only).</p>
</li>
<li>
<p><code>CropCommand</code>: Allows user to crop images by specifying the coordinates of the top left corner, the width and the height of the desired cropped image.</p>
</li>
<li>
<p><code>ResizeCommand</code>: Allows user to resize images to the desired width and height.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following describes main operations and processes for each command stated above.</p>
</div>
</div>
<div class="sect3">
<h4 id="rotate-command"><a class="link" href="#rotate-command">Rotate Command</a></h4>
<div class="paragraph">
<p>This command allows the user to rotate the targeted image by specifying a degree (90, 180 or 270 only). Upon receiving an input degree from the user, the degree will be checked for its validity and will throw an error if the degree is not within the specified range. The command will then be added to the <code>List&lt;Commands&gt;</code> belonging to <code>tempImage</code> found in <code>currentEdit</code> which saves the editing history of the targeted image.</p>
</div>
<div class="paragraph">
<p>Given below is an example usage scenario and how the command should behave at each step [This applies to the other image manipulation commands as well.]:</p>
</div>
<div class="paragraph">
<p>Step 1. When the user runs an open command to edit an image, it invokes a method which creates an instance of an <code>Image</code> that stores the filepath of the image, its history of edits <code>List&lt;Command&gt;</code> and its metadata. This <code>Image</code> object is saved under the variable name <code>tempImage</code> in <code>currentEdit</code> for editing.</p>
</div>
<div class="paragraph">
<p>Step 2. When the user enters the command (e.g. <code>rotate 90</code>), the entered command is parsed and the command will be executed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If an invalid command is provided, a reminder of how to use the command will be given to the user and no command will be executed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Step 3. During execution, the <code>execute</code> method in the <code>RotateCommand</code> class invokes <code>currentEdit#getTempImage()</code> to get the <code>tempImage</code> from the <code>currentEdit</code>.</p>
</div>
<div class="paragraph">
<p>Step 4. Upon retrieving the <code>tempImage</code>, the <code>execute</code> method in <code>RotateCommand</code> gets a <code>BufferedImage</code> instance from <code>tempImage</code>.The method then calls the external library <a href="https://github.com/rkalla/imgscalr"><code>ImgScalr</code></a>'s class <code>rotate</code> and passes the <code>BufferedImage</code> object in.</p>
</div>
<div class="paragraph">
<p>Step 5. A <code>BufferedImage</code> object is returned from the external library and <code>currentEdit#updateTempImage()</code> is invoked to save the newly edited <code>BufferedImage</code> and replace the previous image in the filepath of the <code>tempImage</code>.</p>
</div>
<div class="paragraph">
<p>Step 6. The <code>execute</code> method then checks if the boolean <code>isNewCommand</code> is true. If it is true, it indicates that the command is a new <code>Rotate</code> command called directly from the user and not through an <code>undo/redo</code> command which triggers Step 7 in the line below. Otherwise, the commandâ€™s execution ends in this step.</p>
</div>
<div class="paragraph">
<p>Step 7. <code>isNewCommand</code> is set to false to signal that this command is not a new rotate command if it is executed again through the <code>undo/redo</code> command. <code>currentEdit#addCommand(this)</code> is invoked to add this command to the <code>List&lt;Command&gt;</code> in <code>tempImage</code> for the <code>undo/redo</code> function and <code>currentEdit#displayTempImage()</code> is used to display the edited image on the graphical user interface.<br></p>
</div>
<div class="paragraph">
<p>The diagram below illustrates how the <code>Rotate</code> Command works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/RotateCommandSequenceDiagram.png" alt="RotateCommandSequenceDiagram" width="800">
</div>
<div class="title">Figure 12. Sequence Diagram for Rotate Command</div>
</div>
<div class="sect4">
<h5 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h5>
<div class="ulist">
<ul>
<li>
<p>Images that are still being edited have to be stored and edited in a temp directory first due to our <code>undo/redo</code> implementation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="crop-command"><a class="link" href="#crop-command">Crop Command</a></h4>
<div class="paragraph">
<p>This command allows the user to crop the targeted image by specifying the coordinates of the top left hand corner of the desired image, the width of the desired image and the height of the desired image. Upon receiving the inputs, the values will be checked for their validity and will throw an error if any value is not within the specified range. The command will then be added to the <code>List&lt;Command&gt;</code> belonging to <code>tempImage</code> found in <code>currentEdit</code> which saves the editing history of the targeted image.</p>
</div>
<div class="paragraph">
<p>Refer to the example usage scenario, sequence diagram and design considerations in <a href="#rotate-command">Rotate Command</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="resize-command"><a class="link" href="#resize-command">Resize Command</a></h4>
<div class="paragraph">
<p>This command allows the user to resize the targeted image by specifying the width and height of the desired image. Upon receiving the inputs, the values will be checked for their validity and will throw an error if any value is not within the specified range. The command will then be added to the <code>List&lt;Command&gt;</code> belonging to <code>tempImage</code> found in <code>currentEdit</code> which saves the editing history of the targeted image.</p>
</div>
<div class="paragraph">
<p>Refer to the example usage scenario, sequence diagram and design considerations in <a href="#rotate-command">Rotate Command</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="watermark-feature"><a class="link" href="#watermark-feature">WaterMark Feature</a></h3>
<div class="paragraph">
<p>This command allows the user to add a watermark to their image. Upon receiving an input message from the user, the message will be checked for its validity and will throw an error if the message is empty or contains only spaces. Messages can contain words and numbers separated by spaces. The command will then be added to the <code>List&lt;Commands&gt;</code> belonging to <code>tempImage</code> found in <code>currentEdit</code> which saves the editing history of the targetted image.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Each image can only have 1 watermark. If the user would like to edit the watermark, the user can remove the watermark by using the <code>Undo</code> function and then add a new watermark.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="current-implementation-2"><a class="link" href="#current-implementation-2">Current Implementation</a></h4>
<div class="paragraph">
<p>The manipulation feature is facilitated by <code>CurrentEdit</code>. It uses the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CurrentEdit#tempImageDoNotExist()</code> - Returns <code>true</code> if <code>tempImage</code> in <code>CurrentEdit</code> is null. <code>tempImage</code> is null only if <code>open</code> command is never called.</p>
</li>
<li>
<p><code>CurrentEdit#getTempImage</code> - Retrieves the temporary image <code>tempImage</code> which stores the filepath of the temporary image in the <code>temp</code> directory, its history of edits [<code>List&lt;Command&gt;</code>] and its metadata.</p>
</li>
<li>
<p><code>CurrentEdit#updateTempImage</code> - Replaces the temporary image in <code>temp</code> directory with the newly edited image and update the <code>tempImage</code> instance in the class.</p>
</li>
<li>
<p><code>CurrentEdit#addCommand</code> - Adds this command to the edit history [<code>List&lt;Command&gt;</code>] in <code>tempImage</code> for the <code>undo/redo</code> command.</p>
</li>
<li>
<p><code>CurrentEdit#displayTempImage()</code> - Displays the temporary image stored in the <code>temp</code> directory.</p>
</li>
<li>
<p><code>Image#hasWaterMark()</code> - Checks if the <code>Image</code> already has a watermark.</p>
</li>
<li>
<p><code>Image#setWaterMark(boolean)</code> - Sets the <code>Image</code> object&#8217;s <code>hasWaterMark</code> field accordingly, if the <code>Image</code> object has or does not have a watermark.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Given below is an example usage scenario and how the command should behave at each step:</p>
</div>
<div class="paragraph">
<p>Step 1. When the user runs an open command to edit an image, it invokes a method which creates an instance of an <code>Image</code> that stores the filepath of the image, its history of edits <code>List&lt;Command&gt;</code> and its metadata. This <code>Image</code> object is saved under the variable name <code>tempImage</code> in <code>currentEdit</code> for editing.</p>
</div>
<div class="paragraph">
<p>Step 2. When the user enters the command (e.g. <code>wm FomoFoto</code>), the entered command is parsed and the command will be executed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If an invalid command is provided, a reminder of how to use the command will be given to the user and no command will be executed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Step 3. During execution, the <code>execute</code> method in the <code>WaterMarkCommand</code> class invokes <code>currentEdit#getTempImage()</code> to get the <code>tempImage</code> from the <code>currentEdit</code>.</p>
</div>
<div class="paragraph">
<p>Step 4. Upon retrieving the <code>tempImage</code>, the <code>execute</code> method in the <code>WaterMarkCommand</code> gets the  <code>BufferedImage</code> instance of the <code>tempImage</code> object and copies the <code>BufferedImage</code> object to a temporary <code>BufferedImage</code> object with the same width, height and image type. The <code>execute</code> method then initialises the necessary graphic properties using the <code>Graphics2D</code> Java class. The message is centralised and overlays the temporary <code>BufferedImage</code> object.</p>
</div>
<div class="paragraph">
<p>Step 5. The <code>execute</code> method then checks for a few conditions listed below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>isNewCommand</code>: Checks if the <code>WaterMark</code> command is from an input by the user, from an <code>undo/redo</code> command or from a <code>SetPreset</code> command.</p>
</li>
<li>
<p><code>isPreset</code>: Checks if the <code>WaterMark</code> command is from a Preset.</p>
</li>
<li>
<p><code>initialImage#hasWaterMark()</code>: Checks if the <code>tempImage</code> already has a watermark.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Step 6. According to the above 3 conditions, the following combinations will result in different actions:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>isNewCommand</code> = <code>True</code> and <code>initialImage#hasWaterMark()</code> = <code>False</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Invokes <code>initialImage#setWaterMark(True)</code> to indicate that the image has a watermark.<br></p>
</li>
<li>
<p>Invokes <code>currentEdit#updateTempImage()</code> to  save the newly edited <code>BufferedImage</code> and replace the previous image in the filepath of the <code>tempImage</code>.</p>
</li>
<li>
<p>Sets <code>isNewCommand</code> to false to signal that this command is not a new rotate command if it is executed again through the <code>undo/redo</code> function.</p>
</li>
<li>
<p>Invokes <code>currentEdit#addCommand(this)</code> to add this command to the <code>List&lt;Command&gt;</code> in <code>tempImage</code> for the <code>undo/redo</code> function and <code>currentEdit#displayTempImage()</code> is used to display the edited image on the graphical user interface.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>isNewCommand</code> = <code>True</code> and <code>initialImage#hasWaterMark()</code> = <code>True</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Throws an exception as there is already a watermark on <code>tempImage</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>isNewCommand</code> = <code>False</code> and <code>isPreset</code> = <code>False</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Indicates that it is an <code>undo/redo</code> function.</p>
</li>
<li>
<p>Invokes <code>initialImage#setWaterMark(true)</code> to indicate that the image has a watermark.</p>
</li>
<li>
<p>Invokes <code>currentEdit#updateTempImage()</code> to save the newly edited <code>BufferedImage</code> and replace the previous image in the filepath of the <code>tempImage</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>isNewCommand</code> = <code>False</code> and <code>isPreset</code> = <code>True</code> and <code>initialImage#hasWaterMark()</code> = <code>False</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Indicates that a preset is added to a image with no watermark.</p>
</li>
<li>
<p>Invokes <code>initialImage#setWaterMark(true)</code> to indicate that the image has a watermark.</p>
</li>
<li>
<p>Invokes <code>currentEdit#updateTempImage()</code> to save the newly edited <code>BufferedImage</code> and replace the previous image in the filepath of the <code>tempImage</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Anything else:</p>
<div class="ulist">
<ul>
<li>
<p>Throws an exception as there is already a watermark on <code>tempImage</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The diagram below illustrates how the WaterMark Command works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/WaterMarkCommandSequenceDiagram.png" alt="WaterMarkCommandSequenceDiagram" width="800">
</div>
<div class="title">Figure 13. Sequence Diagram for WaterMark Command</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design Considerations</a></h4>
<div class="ulist">
<ul>
<li>
<p>Images that are still being edited have to be stored and edited in a temp directory first due to our <code>undo/redo</code> implementation.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2019-04-14 19:09:22 UTC</div></div></div></body></html>